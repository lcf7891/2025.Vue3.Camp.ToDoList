import{u as C,r as b,l as w,j as p,o as c,d as s,m as A,v as R,n as g,t as k,F as W,p as O,c as B,q as X,h as v,f as U,w as S,b as G,e as J,i as E,a as H}from"./index-BvDDDohq.js";import{g as P,d as M}from"./useNicknameStorage-CiJr0EmX.js";const F="data:image/png;base64,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",N="/2025.Vue3.Camp.ToDoList/assets/empty-BU8GQkiF.png",L={class:"group mb-4 flex items-center"},Q={class:"border-tabele mr-4 flex w-full items-center border-b pb-4"},V=["checked"],D={key:0,class:"flex w-full items-center"},Z=["placeholder"],I={__name:"TodoItem",props:{item:Object,editId:String},emits:["todo-status","edit-open","edit-cancel","edit-save","del-todo"],setup(d,{emit:h}){const r=d,n=h,u=C(),a=b(""),i=w(()=>r.editId===r.item.id),x=w(()=>({"material-symbols-outlined":!i.value,hidden:i.value})),f=()=>{n("todo-status",r.item.id)},y=t=>{n("edit-open",t)},T=()=>{n("edit-cancel",null),a.value=""},m=t=>{const o=a.value.trim();if(o){const l={id:t,content:o};n("edit-cancel",null),n("edit-save",l),a.value=""}else u.showToast("變更事項內容失敗","請輸入要更改的內容")},e=t=>{n("del-todo",t)};return(t,o)=>(c(),p("div",L,[s("div",Q,[s("input",{class:"border-muted checked:bg-no-repea mr-4 h-[20px] min-w-[20px] appearance-none rounded-sm border bg-white checked:border-white checked:[background-image:url('/src/assets/images/vector.png')] checked:bg-center",type:"checkbox",checked:d.item.status,onClick:f},null,8,V),i.value?(c(),p("div",D,[A(s("input",{type:"text",placeholder:d.item.content,class:"bg-table text-primary flex-1 py-1 text-sm transition-all duration-300 focus:outline-none","onUpdate:modelValue":o[0]||(o[0]=l=>a.value=l)},null,8,Z),[[R,a.value]]),s("button",{class:"material-symbols-outlined btn rounded-l-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:T}," block "),s("button",{class:"material-symbols-outlined btn rounded-r-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:o[1]||(o[1]=l=>m(d.item.id))}," save ")])):(c(),p("div",{key:1,class:g(["w-full",{"text-muted line-through":d.item.status}])},k(d.item.content),3)),s("button",{class:g(["btn mx-0.5 rounded-sm p-1 text-sm opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",x.value]),type:"button",onClick:o[2]||(o[2]=l=>y(d.item.id))}," edit_note ",2)]),s("button",{class:"material-symbols-outlined mr-4 mb-4 cursor-pointer opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",type:"button",onClick:o[3]||(o[3]=l=>e(d.item.id))}," close ")]))}},j={class:"rounded-xl bg-white shadow-xl"},q={class:"tab-btn-group"},K={class:"w-full"},z={class:"w-full"},Y={class:"w-full"},_={class:"py-6 pl-6"},$={class:"py-2 text-sm"},tt={__name:"TodoList",props:{todos:{type:Array,default:()=>[]}},emits:["del-todo","edit-todo","patch-todo"],setup(d,{emit:h}){const r=d,n=h,u=b(null),a=w(()=>r.todos.filter(m=>!m.status)),i=b("all"),x=w(()=>i.value==="wait"?a.value:i.value==="done"?r.todos.filter(m=>m.status):r.todos),f=()=>{i.value="wait"},y=()=>{i.value="done"},T=()=>{i.value="all"};return(m,e)=>(c(),p("div",j,[s("ul",q,[s("li",K,[s("button",{class:g(["btn tab-btn rounded-tl-xl text-sm",{"tab-btn-active":i.value==="all"}]),type:"button",onClick:T}," 全部 ",2)]),s("li",z,[s("button",{class:g(["btn tab-btn text-sm",{"tab-btn-active":i.value==="wait"}]),type:"button",onClick:f}," 待完成 ",2)]),s("li",Y,[s("button",{class:g(["btn tab-btn rounded-tr-xl text-sm",{"tab-btn-active":i.value==="done"}]),type:"button",onClick:y}," 已完成 ",2)])]),s("div",_,[(c(!0),p(W,null,O(x.value,t=>(c(),B(I,{key:t.id,item:t,"edit-id":u.value,onTodoStatus:e[0]||(e[0]=o=>n("patch-todo",o)),onEditOpen:e[1]||(e[1]=o=>u.value=o),onEditCancel:e[2]||(e[2]=o=>u.value=null),onEditSave:e[3]||(e[3]=o=>n("edit-todo",o)),onDelTodo:e[4]||(e[4]=o=>n("del-todo",o))},null,8,["item","edit-id"]))),128)),s("p",$,k(a.value.length)+" 個待完成項目",1)])]))}},et={class:"min-h-screen lg:bg-linear-[175deg,#FFD370_60%,#fff_40%]"},ot={class:"flex items-center justify-between px-8 py-4 lg:mb-6"},st={class:"flex items-center"},nt={class:"mr-6 hidden lg:inline-block"},at={class:"font-bold"},lt={class:"container mx-auto flex justify-center px-9 pb-9"},it={class:"w-125"},dt={key:1,class:"flex flex-col items-center justify-center p-11"},ct={__name:"TodoListView",setup(d){const h=H(),r=b(P()),n=C(),u=b(""),a=b([]),i=e=>a.value.findIndex(t=>t.id===e),x=()=>{const e=r.value;v("users/sign_out","POST").then(t=>{n.showToast(t.message,`期待您再次回來！ ${e}`),M(),E(),h.push("/login")}).catch(t=>{n.showToast("登出失敗",t.message)})},f=()=>{const e=u.value.trim();if(!e){n.showToast("新增失敗","請輸入待辦事項");return}v("todos/","POST",{content:e}).then(t=>{t.status&&(n.showToast("新增成功",t.newTodo.content),a.value.push(t.newTodo),u.value="")}).catch(t=>{n.showToast(t.message,e),u.value=""})},y=e=>{const t=i(e),o=a.value[t];v(`todos/${e}/toggle`,"PATCH").then(l=>{l.status&&(n.showToast(l.message,o.content),a.value[t].status=!a.value[t].status)}).catch(l=>{n.showToast("狀態變更失敗",l.message)})},T=e=>{const t=i(e.id);v(`todos/${e.id}`,"PUT",{content:e.content}).then(o=>{o.status&&(n.showToast(o.message,e.content),a.value[t].content=e.content)}).catch(o=>{n.showToast("編輯失敗",o.message)})},m=e=>{const t=i(e),o=a.value[t];v(`todos/${e}`,"DELETE").then(l=>{l.status&&(n.showToast(l.message,o.content),a.value.splice(t,1))}).catch(l=>{n.showToast("刪除失敗",l.message)})};return X(async()=>{try{const e=await v("todos/");e&&(a.value=e.data)}catch(e){n.showToast("請求失敗",e.message)}}),(e,t)=>{const o=G("RouterLink");return c(),p("div",et,[s("nav",ot,[U(o,{to:"/login"},{default:S(()=>[...t[1]||(t[1]=[s("img",{src:F,alt:"todolist logo"},null,-1)])]),_:1}),s("ul",st,[s("li",nt,[s("span",at,k(r.value),1)]),s("li",{class:"hover:text-primary/80 hover:border-primary/80 border-b border-transparent"},[s("button",{class:"btn",type:"button",onClick:x},"登出")])])]),s("main",lt,[s("div",it,[s("form",{class:"mb-4 flex rounded-lg bg-white p-1 shadow-xl",onSubmit:J(f,["prevent"])},[A(s("input",{class:"w-full px-3 py-2 focus:outline-0",type:"text",placeholder:"新增待辦事項","onUpdate:modelValue":t[0]||(t[0]=l=>u.value=l)},null,512),[[R,u.value]]),t[2]||(t[2]=s("button",{class:"btn bg-primary hover:bg-primary/80 material-symbols-outlined h-10 w-10 rounded-xl text-white",type:"submit"}," add ",-1))],32),a.value.length>0?(c(),B(tt,{key:0,todos:a.value,onPatchTodo:y,onDelTodo:m,onEditTodo:T},null,8,["todos"])):(c(),p("div",dt,[...t[3]||(t[3]=[s("p",{class:"mb-4"},"目前尚無待辦事項",-1),s("img",{class:"w-full",src:N,alt:"empty img"},null,-1)])]))])])])}}};export{ct as default};
