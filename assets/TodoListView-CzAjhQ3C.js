import{u as R,r as x,n as k,k as v,o as p,d as o,p as B,v as W,q as A,x as g,t as C,F as X,y as U,c as O,z as S,A as G,f as J,w as E,b as H,e as P,h,B as M,j as F,a as L}from"./index-Ca6yfTff.js";const N="data:image/png;base64,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",Q="/2025.Vue3.Camp.ToDoList/assets/empty-BU8GQkiF.png",V={class:"group mb-4 flex items-center"},D={class:"border-tabele mr-4 flex w-full items-center border-b pb-4"},Z=["checked"],I={key:0,class:"flex w-full items-center"},j=["placeholder"],q={__name:"TodoItem",props:{item:Object,editId:String},emits:["todo-status","edit-open","edit-cancel","edit-save","del-todo"],setup(d,{emit:y}){const u=d,s=y,r=R(),n=x(""),l=k(()=>u.editId===u.item.id),w=k(()=>({"material-symbols-outlined":!l.value,hidden:l.value})),T=()=>{s("todo-status",u.item.id)},f=e=>{s("edit-open",e)},b=()=>{s("edit-cancel",null),n.value=""},c=e=>{const t=n.value.trim();if(t){const a={id:e,content:t};s("edit-cancel",null),s("edit-save",a),n.value=""}else r.showToast("變更事項內容失敗","請輸入要更改的內容")},i=e=>{s("del-todo",e)};return(e,t)=>(p(),v("div",V,[o("div",D,[o("input",{class:"border-muted checked:bg-no-repea mr-4 h-[20px] min-w-[20px] appearance-none rounded-sm border bg-white checked:border-white checked:[background-image:url('/src/assets/images/vector.png')] checked:bg-center",type:"checkbox",checked:d.item.status,onClick:T},null,8,Z),l.value?(p(),v("div",I,[B(o("input",{type:"text",placeholder:d.item.content,class:"bg-table text-primary flex-1 py-1 text-sm transition-all duration-300 focus:outline-none","onUpdate:modelValue":t[0]||(t[0]=a=>n.value=a),onKeyup:[t[1]||(t[1]=A(a=>c(d.item.id),["enter"])),A(b,["esc"])]},null,40,j),[[W,n.value]]),o("button",{class:"material-symbols-outlined btn rounded-l-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:b}," block "),o("button",{class:"material-symbols-outlined btn rounded-r-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:t[2]||(t[2]=a=>c(d.item.id))}," save ")])):(p(),v("div",{key:1,class:g(["w-full truncate",{"text-muted line-through":d.item.status}])},C(d.item.content),3)),o("button",{class:g(["btn mx-0.5 rounded-sm p-1 text-sm opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",w.value]),type:"button",onClick:t[3]||(t[3]=a=>f(d.item.id))}," edit_note ",2)]),o("button",{class:"material-symbols-outlined mr-4 mb-4 cursor-pointer opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",type:"button",onClick:t[4]||(t[4]=a=>i(d.item.id))}," close ")]))}},K={class:"rounded-xl bg-white shadow-xl"},z={class:"tab-btn-group"},Y={class:"w-full"},_={class:"w-full"},$={class:"w-full"},tt={class:"py-6 pl-6"},et={class:"py-2 text-sm"},ot={__name:"TodoList",props:{todos:{type:Array,default:()=>[]}},emits:["del-todo","edit-todo","patch-todo"],setup(d,{emit:y}){const u=d,s=y,r=x(null),n=k(()=>u.todos.filter(c=>!c.status)),l=x("all"),w=k(()=>l.value==="wait"?n.value:l.value==="done"?u.todos.filter(c=>c.status):u.todos),T=()=>{l.value="wait"},f=()=>{l.value="done"},b=()=>{l.value="all"};return(c,i)=>(p(),v("div",K,[o("ul",z,[o("li",Y,[o("button",{class:g(["btn tab-btn rounded-tl-xl text-sm",{"tab-btn-active":l.value==="all"}]),type:"button",onClick:b}," 全部 ",2)]),o("li",_,[o("button",{class:g(["btn tab-btn text-sm",{"tab-btn-active":l.value==="wait"}]),type:"button",onClick:T}," 待完成 ",2)]),o("li",$,[o("button",{class:g(["btn tab-btn rounded-tr-xl text-sm",{"tab-btn-active":l.value==="done"}]),type:"button",onClick:f}," 已完成 ",2)])]),o("div",tt,[(p(!0),v(X,null,U(w.value,e=>(p(),O(q,{key:e.id,item:e,"edit-id":r.value,onTodoStatus:i[0]||(i[0]=t=>s("patch-todo",t)),onEditOpen:i[1]||(i[1]=t=>r.value=t),onEditCancel:i[2]||(i[2]=t=>r.value=null),onEditSave:i[3]||(i[3]=t=>s("edit-todo",t)),onDelTodo:i[4]||(i[4]=t=>s("del-todo",t))},null,8,["item","edit-id"]))),128)),o("p",et,C(n.value.length)+" 個待完成項目",1)])]))}},st={class:"min-h-screen lg:bg-linear-[175deg,#FFD370_60%,#fff_40%]"},nt={class:"flex items-center justify-between px-8 py-4 lg:mb-6"},at={class:"flex items-center"},lt={class:"mr-6 hidden lg:inline-block"},it={class:"font-bold"},dt={class:"container mx-auto flex justify-center px-9 pb-9"},rt={class:"w-125"},ut={key:1,class:"flex flex-col items-center justify-center p-11"},mt={__name:"TodoListView",setup(d){const y=L(),u=x(S()),s=R(),r=x(""),n=x([]),l=e=>n.value.findIndex(t=>t.id===e),w=async()=>{const e=u.value;try{const t=await h("users/sign_out","POST");s.showToast(t.message,`期待您再次回來！ ${e}`),M(),F(),y.push("/")}catch(t){s.showToast("登出失敗",t.message)}},T=async()=>{const e=r.value.trim();if(!e){s.showToast("新增失敗","請輸入待辦事項"),r.value="";return}try{const t=await h("todos/","POST",{content:e});s.showToast("新增成功",t.newTodo.content),n.value.push(t.newTodo)}catch(t){s.showToast(t.message,e)}finally{r.value=""}},f=async e=>{const t=l(e),a=n.value[t];try{const m=await h(`todos/${e}/toggle`,"PATCH");s.showToast(m.message,a.content),n.value[t].status=!n.value[t].status}catch(m){s.showToast("狀態變更失敗",m.message)}},b=async e=>{const t=l(e.id);try{const a=await h(`todos/${e.id}`,"PUT",{content:e.content});s.showToast(a.message,e.content),n.value[t].content=e.content}catch(a){s.showToast("編輯失敗",a.message)}},c=async e=>{const t=l(e),a=n.value[t];try{const m=await h(`todos/${e}`,"DELETE");s.showToast(m.message,a.content),n.value.splice(t,1)}catch(m){s.showToast("刪除失敗",m.message)}},i=async()=>{try{const e=await h("todos/");n.value=e.data}catch(e){s.showToast("請求失敗",e.message)}};return G(()=>i()),(e,t)=>{const a=H("RouterLink");return p(),v("div",st,[o("nav",nt,[J(a,{to:"/"},{default:E(()=>[...t[1]||(t[1]=[o("img",{src:N,alt:"todolist logo"},null,-1)])]),_:1}),o("ul",at,[o("li",lt,[o("span",it,C(u.value)+" 的待辦事項",1)]),o("li",{class:"hover:text-primary/80 hover:border-primary/80 border-b border-transparent"},[o("button",{class:"btn",type:"button",onClick:w},"登出")])])]),o("main",dt,[o("div",rt,[o("form",{class:"mb-4 flex rounded-lg bg-white p-1 shadow-xl",onSubmit:P(T,["prevent"])},[B(o("input",{class:"w-full px-3 py-2 focus:outline-0",type:"text",placeholder:"新增待辦事項","onUpdate:modelValue":t[0]||(t[0]=m=>r.value=m)},null,512),[[W,r.value]]),t[2]||(t[2]=o("button",{class:"btn bg-primary hover:bg-primary/80 material-symbols-outlined h-10 w-10 rounded-xl text-white",type:"submit"}," add ",-1))],32),n.value.length>0?(p(),O(ot,{key:0,todos:n.value,onPatchTodo:f,onDelTodo:c,onEditTodo:b},null,8,["todos"])):(p(),v("div",ut,[...t[3]||(t[3]=[o("p",{class:"mb-4"},"目前尚無待辦事項",-1),o("img",{class:"w-full",src:Q,alt:"empty img"},null,-1)])]))])])])}}};export{mt as default};
