import{u as f,a as w,r as v,c as b,o as V,w as m,b as x,d as g,e as o,f as k,g as t,h as y,i as N}from"./index-Bx5OOcxe.js";import{_ as P,a as l}from"./InputField-Bpuvvblq.js";const _={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},T={class:"text-center"},U={__name:"RegisterView",setup(L){const r=f(),u=x(),i=w(),a=v({email:"",nickName:"",password:"",confirmPassword:""}),n=()=>{a.value={email:"",nickName:"",password:"",confirmPassword:""}},p=async()=>{if(a.value.password!==a.value.confirmPassword){r.showToast("註冊失敗","密碼與確認密碼不符"),n();return}const d={email:a.value.email,password:a.value.password,nickname:a.value.nickName};i.startLoading();try{const e=await N("users/sign_up","POST",d);r.showToast("註冊成功",e.uid),u.push("/login")}catch(e){r.showToast("註冊失敗",e.message)}finally{n(),i.stopLoading()}};return(d,e)=>{const c=g("RouterLink");return V(),b(P,null,{default:m(()=>[o("div",_,[e[6]||(e[6]=o("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"註冊帳號",-1)),o("form",{class:"mb-6",onSubmit:k(p,["prevent"])},[t(l,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:a.value.email,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.email=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),t(l,{type:"text",id:"inputNick",label:"您的暱稱",placeholder:"請輸入您的暱稱",modelValue:a.value.nickName,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.nickName=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),t(l,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:a.value.password,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.password=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),t(l,{class:"mb-3 lg:mb-6",type:"password",id:"inputConfirmPassword",label:"再次輸入密碼",placeholder:"請輸入再次輸入密碼",modelValue:a.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.confirmPassword=s),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[4]||(e[4]=o("div",{class:"text-center"},[o("button",{class:"basic-btn btn",type:"submit"},"註冊帳號")],-1))],32),o("div",T,[t(c,{to:"/",class:"btn text-primary hover:text-primary/80 font-bold"},{default:m(()=>[...e[5]||(e[5]=[y(" 登入 ",-1)])]),_:1})])])]),_:1})}}};export{U as default};
