import{r as c,u as f,c as w,o as x,a as b,w as d,b as s,d as v,e as n,f as k}from"./index-Bs_SOoK9.js";import{_ as u,L as g,a as V}from"./useApi-_Cv9T8BF.js";const _="todolistToken",T=(a,t)=>{document.cookie=`${_}=${a}; expires=${t}; path=/`},y="nickname",$=a=>{localStorage.setItem(y,a)},h={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},L={class:"text-center"},E={__name:"LoginView",setup(a){const t=c({email:"",password:""}),i=()=>{t.value={email:"",password:""}},r=f(),p=()=>{const m={email:t.value.email,password:t.value.password};V("users/sign_in","POST",m).then(e=>{if(e.status){const{token:l,exp:o}=e;T(l,o),$(e.nickname),i(),r.showToast("登入成功",`歡迎回來！ ${e.nickname}`)}}).catch(e=>{r.showToast("登入失敗",e.message),i()})};return(m,e)=>{const l=b("RouterLink");return x(),w(g,null,{default:d(()=>[s("div",h,[e[4]||(e[4]=s("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"最實用的線上代辦事項服務",-1)),s("form",{class:"mb-6",onSubmit:v(p,["prevent"])},[n(u,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.email=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),n(u,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.password=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[2]||(e[2]=s("div",{class:"text-center"},[s("button",{class:"basic-btn btn",type:"submit"},"登入")],-1))],32),s("div",L,[n(l,{to:"/register",class:"btn text-primary hover:text-primary/80 font-bold"},{default:d(()=>[...e[3]||(e[3]=[k(" 註冊帳號 ",-1)])]),_:1})])])]),_:1})}}};export{E as default};
