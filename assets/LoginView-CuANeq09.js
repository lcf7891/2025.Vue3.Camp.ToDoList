import{u as c,r as f,c as w,o as b,a as x,b as v,w as m,d as s,e as g,f as l,g as V}from"./index-CGyRxR2Q.js";import{_ as u,L as _}from"./InputField-Dgv8NLDt.js";import{a as k,s as y}from"./useApi-CcMlMu4W.js";import{s as T}from"./useNicknameStorage-CiJr0EmX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const h={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},L={class:"text-center"},C={__name:"LoginView",setup(R){const d=x(),r=c(),t=f({email:"",password:""}),i=()=>{t.value={email:"",password:""}},p=()=>{const n={email:t.value.email,password:t.value.password};k("users/sign_in","POST",n).then(e=>{if(e.status){const{token:a,exp:o}=e;y(a,o),T(e.nickname),i(),r.showToast("登入成功",`歡迎回來！ ${e.nickname}`),d.push("/todolist")}}).catch(e=>{r.showToast("登入失敗",e.message),i()})};return(n,e)=>{const a=v("RouterLink");return b(),w(_,null,{default:m(()=>[s("div",h,[e[4]||(e[4]=s("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"最實用的線上代辦事項服務",-1)),s("form",{class:"mb-6",onSubmit:g(p,["prevent"])},[l(u,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.email=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),l(u,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.password=o),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[2]||(e[2]=s("div",{class:"text-center"},[s("button",{class:"basic-btn btn",type:"submit"},"登入")],-1))],32),s("div",L,[l(a,{to:"/register",class:"btn text-primary hover:text-primary/80 font-bold"},{default:m(()=>[...e[3]||(e[3]=[V(" 註冊帳號 ",-1)])]),_:1})])])]),_:1})}}};export{C as default};
