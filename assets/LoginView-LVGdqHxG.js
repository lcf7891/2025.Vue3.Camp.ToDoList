import{u as f,a as w,r as b,c as x,o as g,w as d,b as v,d as _,e as t,f as k,g as l,h as V,i as y,s as T,j as L,k as S}from"./index-CE7otPoy.js";import{_ as h,a as m}from"./InputField-Vt6Jzjgr.js";const R={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},B={class:"text-center"},$={__name:"LoginView",setup(E){const u=v(),r=f(),n=w(),s=b({email:"",password:""}),p=()=>{s.value={email:"",password:""}},c=async()=>{const i={email:s.value.email,password:s.value.password};n.startLoading();try{const e=await y("users/sign_in","POST",i),{token:o,exp:a}=e;T(o,a),L(e.nickname),r.showToast("登入成功",`歡迎回來！ ${e.nickname}`),u.push("/todolist")}catch(e){r.showToast("登入失敗",e.message),S()}finally{p(),n.stopLoading()}};return(i,e)=>{const o=_("RouterLink");return g(),x(h,null,{default:d(()=>[t("div",R,[e[4]||(e[4]=t("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"最實用的線上代辦事項服務",-1)),t("form",{class:"mb-6",onSubmit:k(c,["prevent"])},[l(m,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.email=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),l(m,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[2]||(e[2]=t("div",{class:"text-center"},[t("button",{class:"basic-btn btn",type:"submit"},"登入")],-1))],32),t("div",B,[l(o,{to:"/register",class:"btn text-primary hover:text-primary/80 font-bold"},{default:d(()=>[...e[3]||(e[3]=[V(" 註冊帳號 ",-1)])]),_:1})])])]),_:1})}}};export{$ as default};
