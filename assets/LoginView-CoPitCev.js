import{u as c,r as f,c as w,o as b,a as x,b as v,w as m,d as s,e as _,f as l,g}from"./index-V0rBKMs4.js";import{_ as d,a as V}from"./InputField-C5B4wUrb.js";import{a as k,s as T,d as y}from"./useApi-CcMlMu4W.js";import{s as h}from"./useNicknameStorage-CiJr0EmX.js";const R={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},S={class:"text-center"},$={__name:"LoginView",setup(B){const u=x(),r=c(),t=f({email:"",password:""}),n=()=>{t.value={email:"",password:""}},p=()=>{const i={email:t.value.email,password:t.value.password};k("users/sign_in","POST",i).then(e=>{if(e.status){const{token:o,exp:a}=e;T(o,a),h(e.nickname),n(),r.showToast("登入成功",`歡迎回來！ ${e.nickname}`),u.push("/todolist")}}).catch(e=>{r.showToast("登入失敗",e.message),y(),n()})};return(i,e)=>{const o=v("RouterLink");return b(),w(V,null,{default:m(()=>[s("div",R,[e[4]||(e[4]=s("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"最實用的線上代辦事項服務",-1)),s("form",{class:"mb-6",onSubmit:_(p,["prevent"])},[l(d,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:t.value.email,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value.email=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),l(d,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>t.value.password=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[2]||(e[2]=s("div",{class:"text-center"},[s("button",{class:"basic-btn btn",type:"submit"},"登入")],-1))],32),s("div",S,[l(o,{to:"/register",class:"btn text-primary hover:text-primary/80 font-bold"},{default:m(()=>[...e[3]||(e[3]=[g(" 註冊帳號 ",-1)])]),_:1})])])]),_:1})}}};export{$ as default};
