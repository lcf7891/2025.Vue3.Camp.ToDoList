import{u as A,r as x,j as k,h,o as r,d as t,k as B,v as W,n as g,t as R,F as X,l as U,c as O,m as G,f as S,w as J,b as E,e as H,a as P}from"./index-CAMmfwUe.js";import{a as f}from"./useApi-DFyH3d9z.js";import{g as M,d as F,b as N}from"./useNicknameStorage-C8DwPTr7.js";const L="data:image/png;base64,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",Q="/2025.Vue3.Camp.ToDoList/assets/empty-BU8GQkiF.png",V={class:"group mb-4 flex items-center"},D={class:"border-tabele mr-4 flex w-full items-center border-b pb-4"},Z=["checked"],I={key:0,class:"flex w-full items-center"},j=["placeholder"],q={__name:"TodoItem",props:{item:Object,editId:String},emits:["todo-status","edit-open","edit-cancel","edit-save","del-todo"],setup(m,{emit:p}){const a=m,l=p,i=A(),o=x(""),b=k(()=>a.editId===a.item.id),y=k(()=>({"material-symbols-outlined":!b.value,hidden:b.value})),d=()=>{l("todo-status",a.item.id)},e=()=>{l("edit-open",a.item.id)},v=()=>{l("edit-cancel",null),o.value=""},w=()=>{const T=o.value.trim();if(T){const s={id:a.item.id,content:T};l("edit-cancel",null),l("edit-save",s),o.value=""}else i.showToast("變更事項內容失敗","請輸入要更改的內容")},C=()=>{l("del-todo",a.item.id)};return(T,s)=>(r(),h("div",V,[t("div",D,[t("input",{class:"border-muted checked:bg-no-repea mr-4 h-[20px] min-w-[20px] appearance-none rounded-sm border bg-white checked:border-white checked:[background-image:url('/src/assets/images/vector.png')] checked:bg-center",type:"checkbox",checked:m.item.status,onClick:d},null,8,Z),b.value?(r(),h("div",I,[B(t("input",{type:"text",placeholder:m.item.content,class:"bg-table text-primary flex-1 py-1 text-sm transition-all duration-300 focus:outline-none","onUpdate:modelValue":s[0]||(s[0]=n=>o.value=n)},null,8,j),[[W,o.value]]),t("button",{class:"material-symbols-outlined btn rounded-l-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:v}," block "),t("button",{class:"material-symbols-outlined btn rounded-r-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:w}," save ")])):(r(),h("div",{key:1,class:g(["w-full",{"text-muted line-through":m.item.status}])},R(m.item.content),3)),t("button",{class:g(["btn mx-0.5 rounded-sm p-1 text-sm opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",y.value]),type:"button",onClick:e}," edit_note ",2)]),t("button",{class:"material-symbols-outlined mr-4 mb-4 cursor-pointer opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",type:"button",onClick:C}," close ")]))}},K={class:"rounded-xl bg-white shadow-xl"},_={class:"tab-btn-group"},z={class:"w-full"},Y={class:"w-full"},$={class:"w-full"},tt={class:"py-6 pl-6"},et={class:"py-2 text-sm"},st={__name:"TodoList",props:{todos:{type:Array,default:()=>[]}},setup(m){const p=m,a=A(),l=k(()=>p.todos.filter(s=>!s.status)),i=x("all"),o=k(()=>i.value==="wait"?l.value:i.value==="done"?p.todos.filter(s=>s.status):p.todos),b=()=>{i.value="wait"},y=()=>{i.value="done"},d=()=>{i.value="all"},e=x(null),v=s=>o.value.findIndex(n=>n.id===s),w=s=>{const n=v(s.id);f(`todos/${s.id}`,"PUT",{content:s.content}).then(c=>{c.status&&(a.showToast(c.message,s.content),o.value[n].content=s.content)}).catch(c=>{a.showToast("編輯失敗",c.message)})},C=s=>{const n=v(s),c=o.value[n];f(`todos/${s}`,"DELETE").then(u=>{u.status&&(a.showToast(u.message,c.content),o.value.splice(n,1))}).catch(u=>{a.showToast("刪除失敗",u.message)})},T=s=>{const n=v(s),c=o.value[n];f(`todos/${s}/toggle`,"PATCH").then(u=>{u.status&&(a.showToast(u.message,c.content),o.value[n].status=!o.value[n].status)}).catch(u=>{a.showToast("狀態變更失敗",u.message)})};return(s,n)=>(r(),h("div",K,[t("ul",_,[t("li",z,[t("button",{class:g(["btn tab-btn rounded-tl-xl text-sm",{"tab-btn-active":i.value==="all"}]),type:"button",onClick:d}," 全部 ",2)]),t("li",Y,[t("button",{class:g(["btn tab-btn text-sm",{"tab-btn-active":i.value==="wait"}]),type:"button",onClick:b}," 待完成 ",2)]),t("li",$,[t("button",{class:g(["btn tab-btn rounded-tr-xl text-sm",{"tab-btn-active":i.value==="done"}]),type:"button",onClick:y}," 已完成 ",2)])]),t("div",tt,[(r(!0),h(X,null,U(o.value,c=>(r(),O(q,{key:c.id,item:c,"edit-id":e.value,onTodoStatus:T,onEditOpen:n[0]||(n[0]=u=>e.value=u),onEditCancel:n[1]||(n[1]=u=>e.value=null),onEditSave:w,onDelTodo:C},null,8,["item","edit-id"]))),128)),t("p",et,R(l.value.length)+" 個待完成項目",1)])]))}},ot={class:"min-h-screen lg:bg-linear-[175deg,#FFD370_60%,#fff_40%]"},nt={class:"flex items-center justify-between px-8 py-4 lg:mb-6"},at={class:"flex items-center"},lt={class:"mr-6 hidden lg:inline-block"},it={class:"font-bold"},dt={class:"container mx-auto flex justify-center px-9 pb-9"},ut={class:"w-125"},ct={key:1,class:"flex flex-col items-center justify-center p-11"},bt={__name:"TodoListView",setup(m){const p=P(),a=x(M()),l=A(),i=x(""),o=x([]),b=()=>{const d=a.value;f("users/sign_out","POST").then(e=>{l.showToast(e.message,`期待您再次回來！ ${d}`),F(),N(),p.push("/")}).catch(e=>{l.showToast("登出失敗",e.message)})},y=()=>{const d=i.value.trim();if(!d){l.showToast("新增失敗","請輸入待辦事項");return}f("todos/","POST",{content:d}).then(e=>{e.status&&(l.showToast("新增成功",e.newTodo.content),o.value.push(e.newTodo),i.value="")}).catch(e=>{l.showToast(e.message,d),i.value=""})};return G(async()=>{try{const d=await f("todos/");d&&(o.value=d.data)}catch(d){l.showToast("請求失敗",d.message)}}),(d,e)=>{const v=E("RouterLink");return r(),h("div",ot,[t("nav",nt,[S(v,{to:"/"},{default:J(()=>[...e[1]||(e[1]=[t("img",{src:L,alt:"todolist logo"},null,-1)])]),_:1}),t("ul",at,[t("li",lt,[t("span",it,R(a.value),1)]),t("li",{class:"hover:text-primary/80 hover:border-primary/80 border-b border-transparent"},[t("button",{class:"btn",type:"button",onClick:b},"登出")])])]),t("main",dt,[t("div",ut,[t("form",{class:"mb-4 flex rounded-lg bg-white p-1 shadow-xl",onSubmit:H(y,["prevent"])},[B(t("input",{class:"w-full px-3 py-2 focus:outline-0",type:"text",placeholder:"新增待辦事項","onUpdate:modelValue":e[0]||(e[0]=w=>i.value=w)},null,512),[[W,i.value]]),e[2]||(e[2]=t("button",{class:"btn bg-primary hover:bg-primary/80 material-symbols-outlined h-10 w-10 rounded-xl text-white",type:"submit"}," add ",-1))],32),o.value.length>0?(r(),O(st,{key:0,todos:o.value},null,8,["todos"])):(r(),h("div",ct,[...e[3]||(e[3]=[t("p",{class:"mb-4"},"目前尚無待辦事項",-1),t("img",{class:"w-full",src:Q,alt:"empty img"},null,-1)])]))])])])}}};export{bt as default};
