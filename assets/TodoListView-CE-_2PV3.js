import{u as L,r as g,p as C,l as y,o as v,e as o,q as W,v as O,x as R,y as k,t as A,F as U,z as S,c as X,A as G,a as J,B as E,g as H,w as P,d as M,f as F,m as B,i as x,C as N,k as Q,b as V}from"./index-Bx5OOcxe.js";const D="data:image/png;base64,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",Z="/2025.Vue3.Camp.ToDoList/assets/empty-BU8GQkiF.png",I={class:"group mb-4 flex items-center"},j={class:"border-tabele mr-4 flex w-full items-center border-b pb-4"},q=["checked"],K={key:0,class:"flex w-full items-center"},z=["placeholder"],Y={__name:"TodoItem",props:{item:Object,editId:String},emits:["todo-status","edit-open","edit-cancel","edit-save","del-todo"],setup(d,{emit:w}){const u=d,n=w,a=L(),l=g(""),s=C(()=>u.editId===u.item.id),b=C(()=>({"material-symbols-outlined":!s.value,hidden:s.value})),f=()=>{n("todo-status",u.item.id)},T=r=>{n("edit-open",r)},h=()=>{n("edit-cancel",null),l.value=""},c=r=>{const t=l.value.trim();if(t){const e={id:r,content:t};n("edit-cancel",null),n("edit-save",e),l.value=""}else a.showToast("變更事項內容失敗","請輸入要更改的內容")},i=r=>{n("del-todo",r)};return(r,t)=>(v(),y("div",I,[o("div",j,[o("input",{class:"border-muted checked:bg-no-repea mr-4 h-[20px] min-w-[20px] appearance-none rounded-sm border bg-white checked:border-white checked:[background-image:url('/src/assets/images/vector.png')] checked:bg-center",type:"checkbox",checked:d.item.status,onClick:f},null,8,q),s.value?(v(),y("div",K,[W(o("input",{type:"text",placeholder:d.item.content,class:"bg-table text-primary flex-1 py-1 text-sm transition-all duration-300 focus:outline-none","onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),onKeyup:[t[1]||(t[1]=R(e=>c(d.item.id),["enter"])),R(h,["esc"])]},null,40,z),[[O,l.value]]),o("button",{class:"material-symbols-outlined btn rounded-l-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:h}," block "),o("button",{class:"material-symbols-outlined btn rounded-r-sm p-1 text-sm transition-all duration-300 group-hover:translate-x-0 hover:scale-110",type:"button",onClick:t[2]||(t[2]=e=>c(d.item.id))}," save ")])):(v(),y("div",{key:1,class:k(["w-full truncate",{"text-muted line-through":d.item.status}])},A(d.item.content),3)),o("button",{class:k(["btn mx-0.5 rounded-sm p-1 text-sm opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",b.value]),type:"button",onClick:t[3]||(t[3]=e=>T(d.item.id))}," edit_note ",2)]),o("button",{class:"material-symbols-outlined mr-4 mb-4 cursor-pointer opacity-0 transition-all duration-300 group-hover:translate-x-0 group-hover:opacity-100 hover:scale-110",type:"button",onClick:t[4]||(t[4]=e=>i(d.item.id))}," close ")]))}},_={class:"rounded-xl bg-white shadow-xl"},$={class:"tab-btn-group"},tt={class:"w-full"},et={class:"w-full"},ot={class:"w-full"},st={class:"py-6 pl-6"},nt={class:"py-2 text-sm"},at={__name:"TodoList",props:{todos:{type:Array,default:()=>[]}},emits:["del-todo","edit-todo","patch-todo"],setup(d,{emit:w}){const u=d,n=w,a=g(null),l=C(()=>u.todos.filter(c=>!c.status)),s=g("all"),b=C(()=>s.value==="wait"?l.value:s.value==="done"?u.todos.filter(c=>c.status):u.todos),f=()=>{s.value="wait"},T=()=>{s.value="done"},h=()=>{s.value="all"};return(c,i)=>(v(),y("div",_,[o("ul",$,[o("li",tt,[o("button",{class:k(["btn tab-btn rounded-tl-xl text-sm",{"tab-btn-active":s.value==="all"}]),type:"button",onClick:h}," 全部 ",2)]),o("li",et,[o("button",{class:k(["btn tab-btn text-sm",{"tab-btn-active":s.value==="wait"}]),type:"button",onClick:f}," 待完成 ",2)]),o("li",ot,[o("button",{class:k(["btn tab-btn rounded-tr-xl text-sm",{"tab-btn-active":s.value==="done"}]),type:"button",onClick:T}," 已完成 ",2)])]),o("div",st,[(v(!0),y(U,null,S(b.value,r=>(v(),X(Y,{key:r.id,item:r,"edit-id":a.value,onTodoStatus:i[0]||(i[0]=t=>n("patch-todo",t)),onEditOpen:i[1]||(i[1]=t=>a.value=t),onEditCancel:i[2]||(i[2]=t=>a.value=null),onEditSave:i[3]||(i[3]=t=>n("edit-todo",t)),onDelTodo:i[4]||(i[4]=t=>n("del-todo",t))},null,8,["item","edit-id"]))),128)),o("p",nt,A(l.value.length)+" 個待完成項目",1)])]))}},lt={class:"min-h-screen lg:bg-linear-[175deg,#FFD370_60%,#fff_40%]"},it={class:"flex items-center justify-between px-8 py-4 lg:mb-6"},dt=["src"],rt={class:"flex items-center"},ut={class:"mr-6 hidden lg:inline-block"},ct={class:"font-bold"},mt={class:"container mx-auto flex justify-center px-9 pb-9"},pt={class:"w-125"},vt={key:1,class:"flex flex-col items-center justify-center p-11"},bt=["src"],ht={__name:"TodoListView",setup(d){const w=V(),u=g(G()),n=L(),a=J(),l=g(""),s=g([]),b=t=>s.value.findIndex(e=>e.id===t),f=async()=>{const t=u.value;a.startLoading();try{const e=await x("users/sign_out","POST");n.showToast(e.message,`期待您再次回來！ ${t}`),N(),Q(),w.push("/")}catch(e){n.showToast("登出失敗",e.message)}finally{a.stopLoading()}},T=async()=>{const t=l.value.trim();if(!t){n.showToast("新增失敗","請輸入待辦事項"),l.value="";return}a.startLoading();try{const e=await x("todos/","POST",{content:t});n.showToast("新增成功",e.newTodo.content),s.value.push(e.newTodo)}catch(e){n.showToast(e.message,t)}finally{l.value="",a.stopLoading()}},h=async t=>{const e=b(t),m=s.value[e];a.startLoading();try{const p=await x(`todos/${t}/toggle`,"PATCH");n.showToast(p.message,m.content),s.value[e].status=!s.value[e].status}catch(p){n.showToast("狀態變更失敗",p.message)}finally{a.stopLoading()}},c=async t=>{const e=b(t.id);a.startLoading();try{const m=await x(`todos/${t.id}`,"PUT",{content:t.content});n.showToast(m.message,t.content),s.value[e].content=t.content}catch(m){n.showToast("編輯失敗",m.message)}finally{a.stopLoading()}},i=async t=>{const e=b(t),m=s.value[e];a.startLoading();try{const p=await x(`todos/${t}`,"DELETE");n.showToast(p.message,m.content),s.value.splice(e,1)}catch(p){n.showToast("刪除失敗",p.message)}finally{a.stopLoading()}},r=async()=>{a.startLoading();try{const t=await x("todos/");s.value=t.data}catch(t){n.showToast("請求失敗",t.message)}finally{a.stopLoading()}};return E(()=>r()),(t,e)=>{const m=M("RouterLink");return v(),y("div",lt,[o("nav",it,[H(m,{to:"/"},{default:P(()=>[o("img",{src:B(D),alt:"todolist logo"},null,8,dt)]),_:1}),o("ul",rt,[o("li",ut,[o("span",ct,A(u.value)+" 的待辦事項",1)]),o("li",{class:"hover:text-primary/80 hover:border-primary/80 border-b border-transparent"},[o("button",{class:"btn",type:"button",onClick:f},"登出")])])]),o("main",mt,[o("div",pt,[o("form",{class:"mb-4 flex rounded-lg bg-white p-1 shadow-xl",onSubmit:F(T,["prevent"])},[W(o("input",{class:"w-full px-3 py-2 focus:outline-0",type:"text",placeholder:"新增待辦事項","onUpdate:modelValue":e[0]||(e[0]=p=>l.value=p)},null,512),[[O,l.value]]),e[1]||(e[1]=o("button",{class:"btn bg-primary hover:bg-primary/80 material-symbols-outlined h-10 w-10 rounded-xl text-white",type:"submit"}," add ",-1))],32),s.value.length>0?(v(),X(at,{key:0,todos:s.value,onPatchTodo:h,onDelTodo:i,onEditTodo:c},null,8,["todos"])):(v(),y("div",vt,[e[2]||(e[2]=o("p",{class:"mb-4"},"目前尚無待辦事項",-1)),o("img",{class:"w-full",src:B(Z),alt:"empty img"},null,8,bt)]))])])])}}};export{ht as default};
