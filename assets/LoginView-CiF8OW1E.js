import{u as c,r as f,c as w,o as b,a as x,b as v,w as i,d as t,e as _,f as l,g,h as V,s as k,i as y,j as T}from"./index-Rvwa9EIh.js";import{_ as m,a as h}from"./InputField-BrUImRLH.js";const R={class:"ml-0 w-full lg:ml-26 lg:w-[304px]"},S={class:"text-center"},M={__name:"LoginView",setup(B){const d=x(),r=c(),s=f({email:"",password:""}),u=()=>{s.value={email:"",password:""}},p=async()=>{const n={email:s.value.email,password:s.value.password};try{const e=await V("users/sign_in","POST",n),{token:o,exp:a}=e;k(o,a),y(e.nickname),r.showToast("登入成功",`歡迎回來！ ${e.nickname}`),d.push("/todolist")}catch(e){r.showToast("登入失敗",e.message),T()}finally{u()}};return(n,e)=>{const o=v("RouterLink");return b(),w(h,null,{default:i(()=>[t("div",R,[e[4]||(e[4]=t("h2",{class:"mb-6 text-center text-2xl font-bold lg:text-left"},"最實用的線上代辦事項服務",-1)),t("form",{class:"mb-6",onSubmit:_(p,["prevent"])},[l(m,{type:"email",id:"inputEmail",label:"Email",placeholder:"請輸入 Email",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.email=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),l(m,{type:"password",id:"inputPassword",label:"密碼",placeholder:"請輸入密碼",modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),e[2]||(e[2]=t("div",{class:"text-center"},[t("button",{class:"basic-btn btn",type:"submit"},"登入")],-1))],32),t("div",S,[l(o,{to:"/register",class:"btn text-primary hover:text-primary/80 font-bold"},{default:i(()=>[...e[3]||(e[3]=[g(" 註冊帳號 ",-1)])]),_:1})])])]),_:1})}}};export{M as default};
